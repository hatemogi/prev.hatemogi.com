<!DOCTYPE html>
<head prefix='og: http://ogp.me/ns#'>
  <meta charset='utf-8'>
  <meta content='IE=edge' http-equiv='X-UA-Compatible'>
  <meta content='width=device-width, initial-scale=1.0' name='viewport'>
  <meta content='프로젝트 18일: Grunt - 자바스크립트 작업 실행기' property='og:title'>
  <meta content='website' property='og:type'>
  <meta content='http://gruntjs.com/img/grunt-logo.png' property='og:image'>
  <meta content='http://hatemogi.com/holiday-project-day-18/' property='og:url'>
  <meta content='개인 프로젝트 18일째, 오늘은 자바스크립트 작업 실행기(task runner), Grunt를 프로젝트에 적용했다. 자동화 테스트를 실행하거나, 자바스크립트 파일들을 합치거나 최소화하는 일처럼 자주 반복하는 프로젝트 수반 작업을 편리하게 실행할 수 있게 해주는 도구다. ' property='og:description'>
  <title>프로젝트 18일: Grunt - 자바스크립트 작업 실행기</title>
  <link href='/css/application.css' rel='stylesheet' type='text/css'>
  <link href='/css/highlight/foundation.css' rel='stylesheet' type='text/css'>
  <link href='/img/favicon.png' rel='shortcut icon'>
</head>
<body>
  <div class='container'>
    <div class='header'>
      <ul class='nav nav-pills pull-right'>
        <li>
          <a href='/'>홈</a>
        </li>
        <li>
          <a href='/articles/'>글</a>
        </li>
        <li>
          <a href='/show-your-work/'>작업</a>
        </li>
        <li>
          <a href='/about/'>소개</a>
        </li>
      </ul>
      <h3 class='logo'>hatemogi</h3>
    </div>
  </div>
  <section id='main-content'>
    <div class='container'>
      <div class='page-header'>
        <h1>
          프로젝트 18일: Grunt - 자바스크립트 작업 실행기
          <small>2014-05-24</small>
        </h1>
      </div>
      <p>개인 프로젝트 18일째, 오늘은 자바스크립트 작업 실행기(task runner), <a href="http://gruntjs.com/">Grunt</a>를 프로젝트에 적용했다. 자동화 테스트를 실행하거나, 자바스크립트 파일들을 합치거나 최소화하는 일처럼 자주 반복하는 프로젝트 수반 작업을 편리하게 실행할 수 있게 해주는 도구다.</p>
      
      <p>Node 환경에서는, npm만으로도 충분할 수 있는데, <a href="http://gruntjs.com/">Grunt</a>에 몇 가지 마음에 드는 <a href="https://github.com/gruntjs">플러그인</a>이 있어서, 곧바로 적용해 보기로 했다.</p>
      
      <p>우선 npm으로 간단히 Grunt를 설치한다.</p>
      
      <pre><code>npm install -g grunt&#x000A;</code></pre>
      
      <h2>Gruntfile 기본</h2>
      
      <p>Make를 쓸 때 Makefile이나 Rake를 쓸 때 Rakefile이 있듯, Grunt를 위해서는 <code>Gruntfile.js</code>가 있다. 프로젝트 디렉터리에 있는 이 파일을 기준으로 각종 작업을 실행한다.</p>
      
      <h3>Gruntfile.js 예제</h3>
      
      <pre><code class="js">module.exports = function(grunt) {&#x000A;  // 작업을 위한 설정&#x000A;  grunt.initConfig({&#x000A;    pkg: grunt.file.readJSON('package.json'),&#x000A;    uglify: {&#x000A;      build: {&#x000A;        src: 'src/app.js',&#x000A;        dest: 'build/app.min.js'&#x000A;      }&#x000A;    }&#x000A;  });&#x000A;&#x000A;  // "uglify" 작업을 위한 플러그인 등록&#x000A;  grunt.loadNpmTasks('grunt-contrib-uglify');&#x000A;&#x000A;  // 기본 작업에 'uglify' 등록&#x000A;  grunt.registerTask('default', ['uglify']);  &#x000A;};&#x000A;</code></pre>
      
      <p>위와 같은 <code>Gruntfile.js</code>를 프로젝트 최상위 디렉터리에 두고,</p>
      
      <pre><code class="bash">grunt&#x000A;</code></pre>
      
      <p>위의 명령을 실행하면, 아무 작업 이름을 주지 않았으므로 <code>default</code> 작업을 실행하려고 하며, 위 <code>Gruntfile.js</code>의 최하단에 명시한 대로 <code>uglify</code> 작업을 진행한다. 그러면, <a href="https://github.com/gruntjs/grunt-contrib-uglify">uglify 플러그인</a>로 등록한 작업을 한다.</p>
      
      <p>즉, 위 예제의 경우</p>
      
      <pre><code class="bash">grunt uglify&#x000A;</code></pre>
      
      <p>라고 실행해도 결과는 같다. 참고로 <code>Gruntfile.js</code> 대신 <code>Gruntfile.coffee</code> 파일을 준비해 둬도 그 역할은 같으며, 단지 자바스크립트 대신 커피스크립트 문법으로 해석한다.</p>
      
      <h2>Grunt 플러그인 추가</h2>
      
      <p><a href="https://github.com/gruntjs">플러그인</a>이 꽤 많았고, 그중 아래의 플러그인을 골라 설치했다.</p>
      
      <ul>
      <li><a href="https://github.com/gruntjs/grunt-contrib-coffee">grunt-contrib-coffee</a>: 커피스크립트 컴파일</li>
      <li><a href="https://github.com/gruntjs/grunt-contrib-uglify">grunt-contrib-uglify</a>: Ugilfy로 자바스크립트 파일 최소화</li>
      <li><a href="https://github.com/gruntjs/grunt-contrib-watch">grunt-contrib-watch</a>: 특정 파일들 감시하다가, 변경되면 지정한 작업 수행</li>
      <li><a href="https://github.com/gruntjs/grunt-contrib-jshint">grunt-contrib-jshint</a>: JSHint로 자바스크립트 파일 검증</li>
      </ul>
      
      
      <p>이하는, 오늘 작성한 <code>Gruntfile.coffee</code> 파일의 일부다.</p>
      
      <h3><a href="https://github.com/hatemogi/holiday-project/blob/day-18/Gruntfile.coffee">Gruntfile.coffee</a></h3>
      
      <pre><code class="coffeescript">module.exports = (grunt) -&gt;&#x000A;  js_files = ['app.js', 'lib/*.js', 'public/js/app.js']&#x000A;&#x000A;  grunt.initConfig {&#x000A;    # 중간 생략&#x000A;    watch:  {&#x000A;      coffee: {&#x000A;        files: ["public/assets/*.coffee"]&#x000A;        tasks: ["coffee", "uglify"]&#x000A;      }&#x000A;      jshint: {&#x000A;        files: js_files&#x000A;        tasks: ["jshint"]&#x000A;      }&#x000A;    }&#x000A;&#x000A;    jshint: {&#x000A;      all: js_files&#x000A;    }&#x000A;  }&#x000A;  # 중간 생략&#x000A;  grunt.registerTask 'default', ['coffee', 'uglify']&#x000A;</code></pre>
      
      <p>기본 작업에는 <code>coffee</code>와 <code>uglify</code>를 걸어 두었고, 별도로 <code>watch</code> 작업을 추가해서,</p>
      
      <pre><code class="bash">grunt watch&#x000A;</code></pre>
      
      <p>를 실행해 두고, 커피스크립트 소스파일을 편집하면, 그 후 저장될 때마다, 즉시 커피스크립트 컴파일을 하며, jshint도 바로 실행된다. 더 나아가, 셀프 테스팅 코드도 <code>watch</code>에 걸어두면, 그때그때 테스트 결과도 바로 확인할 수 있겠다.</p>
      
      <h2>Grunt, 쓸만한가?</h2>
      
      <p>npm의 script 섹션을 써도 웬만큼 다 되는데, 굳이 수고를 들여 별도의 작업 실행기가 필요할까? 잠깐 살펴보니, 그래도 될 거 같다. 우선 그 약간의 수고가 크지 않게 잘 만들어져있고, 문서화도 잘 돼 있다. 무엇보다, 플러그인이 많아서, 원하는 기능을 손쉽게 가져다 쓸 수 있다.</p>
      
      <p>그리고, 참고로, <a href="http://gruntjs-kr.herokuapp.com/">Grunt (비공식) 한글 사이트</a>도 있으니, 한글 문서로도 살펴볼 수 있어서 좋다.</p>
      
      <p>오늘 작업을 포함해, 지금까지 진행하고 있는 내용을 GitHub에 올려놓고 있다.</p>
      
      <blockquote><p><a href="https://github.com/hatemogi/holiday-project">https://github.com/hatemogi/holiday-project</a></p></blockquote>
      
      <p>진행되는 내용은, <a href="/holiday-project-day-17/">어제 살펴본 Travis CI</a>로 지속적으로 통합되며, <a href="/holiday-project-day-14/">Heroku</a>에 이하 주소로 자동 스테이징되고 있다.</p>
      
      <blockquote><p><a href="https://holiday-project-staging.herokuapp.com">https://holiday-project-staging.herokuapp.com</a></p></blockquote>
      
      <p>오늘은 여기까지.</p>
      <div class='page-header'>
        <h4>
          30일 프로젝트 글 목록
        </h4>
      </div>
      <blockquote>
        <ul>
        <li><a href="/holiday-project-day-01/">(05/07) 프로젝트 1일: 웹 브라우저 JS 테스트 환경 - karma &amp; jasmine</a></li>
        <li><a href="/holiday-project-day-02/">(05/08) 프로젝트 2일: 서버 측 JS 테스트 환경 - jasmine-node</a></li>
        <li><a href="/holiday-project-day-03/">(05/09) 프로젝트 3일: express 테스트 환경 - supertest</a></li>
        <li><a href="/holiday-project-day-04/">(05/10) 프로젝트 4일: 웹 환경 패키지 매니저 - bower</a></li>
        <li><a href="/holiday-project-day-05/">(05/11) 프로젝트 5일: 문법 하이라이팅 - highlight.js</a></li>
        <li><a href="/holiday-project-day-06/">(05/12) 프로젝트 6일: 그래프 그리기 - graphviz &amp; D3.js</a></li>
        <li><a href="/holiday-project-day-07/">(05/13) 프로젝트 7일: graphviz 노드에 웹 링크 걸기</a></li>
        <li><a href="/holiday-project-day-08/">(05/14) 프로젝트 8일: D3.js 트랜지션(Transitions)</a></li>
        <li><a href="/holiday-project-day-09/">(05/15) 프로젝트 9일: Node.js로 Git저장소 다루기</a></li>
        <li><a href="/holiday-project-day-10/">(05/16) 프로젝트 10일: Async.js로 콜백 중첩을 풀기</a></li>
        <li><a href="/holiday-project-day-11/">(05/17) 프로젝트 11일: Git 커밋 그래프 그리기 도전</a></li>
        <li><a href="/holiday-project-day-12/">(05/18) 프로젝트 12일: 그래프 그리기 도전 #2</a></li>
        <li><a href="/holiday-project-day-13/">(05/19) 프로젝트 13일: 컨테이너 기반 가상화 프레임워크 - Docker</a></li>
        <li><a href="/holiday-project-day-14/">(05/20) 프로젝트 14일: Heroku에 Node.js 애플리케이션 배포</a></li>
        <li><a href="/holiday-project-day-15/">(05/21) 프로젝트 15일: AngularJS 코드스쿨 강좌 소개</a></li>
        <li><a href="/holiday-project-day-16/">(05/22) 프로젝트 16일: 중간 점검 - 왜 이 프로젝트를 하나?</a></li>
        <li><a href="/holiday-project-day-17/">(05/23) 프로젝트 17일: Travis CI - 지속적 통합 서비스</a></li>
        <li><a href="/holiday-project-day-18/">(05/24) 프로젝트 18일: Grunt - 자바스크립트 작업 실행기</a></li>
        </ul>
      </blockquote>
    </div>
  </section>
  <div class='container'>
    <footer>
      <div class='pull-right'>
        &copy; 2012-2014
        <a href='https://twitter.com/hatemogi'>@hatemogi</a>
      </div>
    </footer>
  </div>
  <script src='/js/application.js' type='text/javascript'></script>
</body>

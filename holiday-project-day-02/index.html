<!DOCTYPE html>
<head>
  <meta charset='utf-8'>
  <meta content='width=device-width, initial-scale=1.0' name='viewport'>
  <title>프로그래밍의 재미: 프로젝트 2일: 서버 측 JS 테스트 환경</title>
  <link href='/css/application.css' rel='stylesheet' type='text/css'>
  <link href='/css/highlight/tomorrow.css' rel='stylesheet' type='text/css'>
  <link href='/img/favicon.png' rel='shortcut icon'>
</head>
<body>
  <div class='container'>
    <div class='header'>
      <ul class='nav nav-pills pull-right'>
        <li>
          <a href='/'>홈</a>
        </li>
        <li>
          <a href='/articles/'>글</a>
        </li>
        <li>
          <a href='/show-your-work/'>작업</a>
        </li>
        <li>
          <a href='/about/'>소개</a>
        </li>
      </ul>
      <h3 class='text-muted'>hatemogi.com</h3>
    </div>
  </div>
  <section id='main-content'>
    <div class='container'>
      <div class='page-header'>
        <h2>
          프로젝트 2일: 서버 측 JS 테스트 환경
          <small>2014-05-08</small>
        </h2>
      </div>
      <p>나는 30일간의 안식휴가 중이다. 휴가 동안 개인 개발 프로젝트를 진행하고 있고, 오늘은 그 둘째 날이다.</p>
      
      <p><a href="/holiday-project-day-01/">첫날</a>은, 클라이언트 측에서의 자바스크립트 테스팅환경을 엉성하게나마 만들었다. 출발이 좋다. 좋다. 그럼 서버사이드에서의 테스팅은 어쩐다? <a href="http://nodejs.org/">Node.js</a>로 돌아가는 <a href="http://expressjs.com/">express</a>로 웹사이트를 구축하려 마음먹은 상태이니, Node.js용 테스팅 프레임워크를 찾아봤다.</p>
      
      <blockquote><p><a href="http://visionmedia.github.io/mocha/">mocha</a>, <a href="http://vowsjs.org/">vows</a>, <a href="http://visionmedia.github.io/expresso/">expresso</a>, <a href="https://github.com/visionmedia/should.js">should.js</a>, <a href="https://github.com/caolan/nodeunit">nodeunit</a>, <a href="http://jasmine.github.io/">jasmine</a></p></blockquote>
      
      <p>대충 찾아봐도 우후죽순 쏟아진다. 루비용 테스팅 프레임워크를 고를 때도, 기본 RSpec을 쓸지 MiniTest를 쓸지 Shoulda를 쓸지 고민해보았지만, 결론은,</p>
      
      <blockquote><p>많이 쓰이는 프레임워크는 다 좋다.</p></blockquote>
      
      <p>워낙 다들 수준이 높아서, 약간의 개인적 호불호가 나뉠 뿐, 우열을 가르는 것이 큰 의미 없어 보인다. 굳이 내게 테스팅 프레임워크 중요한 기준을 꼽으라면,</p>
      
      <ul>
      <li>단순할 것</li>
      <li>문서가 잘 정리돼 있을 것</li>
      <li>최근까지 업데이트가 진행되고 있을 것</li>
      <li>내가 쓰고자 하는 프레임워크들과 잘 연동될 것</li>
      </ul>
      
      
      <p>이 정도로 고민한다. 이런 프레임워크 선택할 때, 언젠가부터 중요하게 자리 잡은 생각도 있다.</p>
      
      <blockquote><p>다 우수한 프레임워크 중에서 최고를 고르려고 지나치게 고민하지 말고, 잘 쓸 수 있는 것 하나를 빠르게 정하자.</p></blockquote>
      
      <p>한번 정해서 쓰면, 나중에 바꾸기가 번거로우므로 처음에 잘 선택해야 한다는 압박을 받기 쉬운데, 그렇다고, 지나치게 고민한다고 해서, 오랜 나중까지 올바른 선택이었다고 판단할 수 있는 것은 아니다. 오히려, 그 고민하는 시간을 짧게 줄이고, 나중에 문제 생겼을 때, 해결하는데 그 시간을 사용한다고 생각하는 것이 나을지 모른다. 고민을 오래 했다면, 아마도, 바꿔야 할 순간이 왔을 때도, &lsquo;충분히 오래 고민해서 결정한 일이야. 잘못된 선택일 리 없어'라고 합리화하며 불편한 고집을 부리게 될 수도 있다. 한편, 오랜 고민의 좋은 점이 있다면, 나름대로 노력을 들였으므로, 다른 대안이 눈에 띄었을 때 너무 쉽게 흔들리지는 않는다는 장점도 있다.</p>
      
      <p>선택의 폭이 다양하면, 그중에 최고의 선택을 고르고 싶은 게 당연한 심리겠지만, 나 혼자 하는 프로젝트의 프레임워크 고르는 일이, 차를 사는 일이나, 직장을 고르는 일이나, 이사 갈 집을 고르는 것처럼 중요한 일은 아니지 않은가? 비슷한 선택안 사이에서 갈팡질팡 고민하는 것만큼 주의력을 갉아먹는 일이 또 있을까?</p>
      
      <p>하지만, 아쉽게도 지나친 고민인지 아닌지는, 그 &lsquo;지나친 고민'을 해보고 나서야 알 수 있다는 게 함정이겠다.</p>
      
      <h3>Jasmine을 Node.js 테스트에 사용</h3>
      
      <p>일단 큰 고민은 잠시 중단하기로 하고, <a href="/holiday-project-day-01/">어제</a> 살짝 살펴본 Jasmine을 서버사이드에서 쓰면 어떻게 되는지 해보기로 한다.</p>
      
      <p>약간의 웹검색+실습 노동을 해보니,</p>
      
      <pre><code>npm install -g jasmine-node&#x000A;</code></pre>
      
      <p>위의 npm명령어로 설치할 수 있는 <code>jasmine-node</code>라는 모듈이 있어서, 노드 환경에서 쉽게 jasmine 테스트를 실행할 수 있다.</p>
      
      <pre><code class="javascript">var jasmine_trial = require('../lib/jasmine_trial');&#x000A;&#x000A;describe("자스민 써보기", function() {&#x000A;  it("contains text property", function() {&#x000A;    expect(jasmine_trial.text()).toBe("자스민 안녕!");&#x000A;  });&#x000A;});&#x000A;</code></pre>
      
      <p><img src="/img/holiday-project/jasmine-node-running.png" class="img-rounded" style="width:500px;"/></p>
      
      <p>위의 코드가 테스트케이스(스펙)고, 아래가 터미널에서 <a href="https://github.com/mhevery/jasmine-node">jasmine-node</a>를 실행한 화면이다. <code>--verbose</code> 옵션으로, 스펙의 설명을 보겠다는 뜻이고, <code>--autotest</code>는 한번 실행하고 끝내는 것이 아니라, 계속 관련 파일들을 주시하고 있겠다는 의미다. <a href="/holiday-project-day-01/">어제</a>의 karma처럼 파일을 주시하고 있다가, 변경되면 다시 테스트를 돌린다.</p>
      
      <p>이 정도로 웹 브라우저와 node.js에서 테스트케이스를 수행할 수 있으면, 그럭저럭 괜찮아 보인다.</p>
      
      <p>여기서 마무리하려니, 진도가 조금 느린 감이 있는데, 프로젝트를 진행 중이기도 하지만, 분명한 것은 <strong>나는 휴가 중</strong>이니까. 게다가 오늘 석양은 매우 멋질듯해서, 이제 맥북은 접고 노을을 감상하러 간다.</p>
      
      <p><img src="/img/holiday-project/sunset-day-02.jpg" alt="" /></p>
      
      <p>오늘은 여기까지.</p>
      <div class='page-header'>
        <h4>
          30일 프로젝트 글 목록
        </h4>
      </div>
      <blockquote>
        <ul>
        <li><a href="/holiday-project-day-01/">(05/07) 프로젝트 1일: 웹 브라우저 JS 테스트 환경 - karma &amp; jasmine</a></li>
        <li><a href="/holiday-project-day-02/">(05/08) 프로젝트 2일: 서버 측 JS 테스트 환경 - jasmine-node</a></li>
        <li><a href="/holiday-project-day-03/">(05/09) 프로젝트 3일: express 테스트 환경 - supertest</a></li>
        <li><a href="/holiday-project-day-04/">(05/10) 프로젝트 4일: 웹 환경 패키지 매니저 - bower</a></li>
        <li><a href="/holiday-project-day-05/">(05/11) 프로젝트 5일: 문법 하이라이팅 - highlight.js</a></li>
        <li><a href="/holiday-project-day-06/">(05/12) 프로젝트 6일: 그래프 그리기 - graphviz &amp; D3.js</a></li>
        <li><a href="/holiday-project-day-07/">(05/13) 프로젝트 7일: graphviz 노드에 웹 링크 걸기</a></li>
        <li><a href="/holiday-project-day-08/">(05/14) 프로젝트 8일: D3.js 트랜지션(Transitions)</a></li>
        </ul>
      </blockquote>
    </div>
  </section>
  <div class='container'>
    <footer>
      <div class='pull-right'>
        &copy; 2012-2014
        <a href='https://twitter.com/hatemogi'>@hatemogi</a>
      </div>
    </footer>
  </div>
  <script src='/js/application.js' type='text/javascript'></script>
</body>
